<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Shell on Le Baron de Charlus</title><link>https://lebaron.sh/tags/shell/</link><description>Recent content in Shell on Le Baron de Charlus</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Le Baron de Charlus</copyright><lastBuildDate>Wed, 09 Aug 2023 13:10:42 +0200</lastBuildDate><atom:link href="https://lebaron.sh/tags/shell/index.xml" rel="self" type="application/rss+xml"/><item><title>B, an ugly Bitwarden CLI</title><link>https://lebaron.sh/p/b-an-ugly-bitwarden-cli/</link><pubDate>Wed, 09 Aug 2023 13:10:42 +0200</pubDate><guid>https://lebaron.sh/p/b-an-ugly-bitwarden-cli/</guid><description>&lt;br>
&lt;p align="center">
&lt;img src="https://lebaron.sh/images/b.png" width="30%">
&lt;/p>
&lt;p>Yes, yes, yes, I knowâ€¦ I don&amp;rsquo;t like graphical interfaces so sometimes I like to make some TUI tools, and sometimes they can be ugly tooâ€¦&lt;/p>
&lt;p>I was tired of wasting time clicking each time on the web extension or on the client, of having to systematically enter my login details, of not having a quick access directly accessible in shortcuts, etc.&lt;/p>
&lt;p>So, living in a terminal 90% of the time, I thought I&amp;rsquo;d do a quick script to put me out of my misery.&lt;/p>
&lt;p>I know, judge me, please yourself :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># [â€¦]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bw list items --search &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --session &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BW_SESSION&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> jq -j &lt;span class="s1">&amp;#39;.[] | [.name, .login.password]&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;\n[&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;]&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;,&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/^\ \ //g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FZF&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --layout&lt;span class="o">=&lt;/span>reverse &lt;span class="p">|&lt;/span> tail -1 &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> -f &lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/^\ \ //g&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> cat &lt;span class="p">|&lt;/span> xclip -se c &amp;gt; /dev/null 2&amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># [â€¦]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>I needed Bitwarden CLI tool &lt;code>bw&lt;/code>, a way to copy in clipboard password &lt;code>xclip&lt;/code>, some json parsing with &lt;code>jq&lt;/code> and &lt;code>fzf&lt;/code> (and &lt;code>fzf-tmux&lt;/code>).&lt;/p>
&lt;p>So dependencies are :&lt;/p>
&lt;ul>
&lt;li>&lt;code>bw&lt;/code> (Bitwarden cli)&lt;/li>
&lt;li>&lt;code>xclip&lt;/code>&lt;/li>
&lt;li>&lt;code>jq&lt;/code>&lt;/li>
&lt;li>&lt;code>fzf&lt;/code>&lt;/li>
&lt;li>&lt;code>fzf-tmux&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>To install this quick and dirty script, you need to create a Bitwarden token, &lt;a class="link" href="https://bitwarden.com/help/personal-api-key/" target="_blank" rel="noopener"
>check documentation here&lt;/a>.
Then set variables in b script.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Fill these vars&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_CLIENTID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_CLIENTSECRET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Finally move &lt;code>b&lt;/code> file to &lt;code>/usr/local/bin&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo mv b /usr/local/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You can then :&lt;/p>
&lt;ul>
&lt;li>Search for a password&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ex, search github password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b github
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Sync vault (download new password from Bitwarden/Vaultwarden server):&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">b --sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>And probably a lot more to come as I could be a lazy man.&lt;/p>
&lt;p>Full script :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_CLIENTID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_CLIENTSECRET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">BW_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">LOCK&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$HOME&lt;/span>&lt;span class="s2">/.bw.lock&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># is unlock ?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nb">test&lt;/span> -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LOCK&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">BW_SESSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>bw unlock --passwordenv BW_PASSWORD &lt;span class="p">|&lt;/span> grep &lt;span class="nb">export&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span> -f &lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> bw sync&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bw login --apikey &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> touch &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LOCK&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># is inside tmux ?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TMUX&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">FZF&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fzf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">FZF&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fzf-tmux&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;--sync&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bw sync
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bw list items --search &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --session &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BW_SESSION&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> jq -j &lt;span class="s1">&amp;#39;.[] | [.name, .login.password]&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;\n[&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;]&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;,&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/^\ \ //g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">FZF&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --layout&lt;span class="o">=&lt;/span>reverse &lt;span class="p">|&lt;/span> tail -1 &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> -f &lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/^\ \ //g&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> cat &lt;span class="p">|&lt;/span> xclip -se c &amp;gt; /dev/null 2&amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="https://github.com/lebarondecharlus/b" target="_blank">Sources are here.&lt;/a>&lt;/p></description></item><item><title>Manage your Zellij sessions</title><link>https://lebaron.sh/p/manage-your-zellij-sessions/</link><pubDate>Tue, 12 Jul 2022 12:22:42 +0200</pubDate><guid>https://lebaron.sh/p/manage-your-zellij-sessions/</guid><description>&lt;img src="https://lebaron.sh/images/zellij.png" width="50%">
&lt;p>Quick post on great &lt;code>Zellij&lt;/code> tool I&amp;rsquo;ve been using for some weeks now in &lt;code>Tmux&lt;/code> replacement.&lt;/p>
&lt;p>I&amp;rsquo;ve been missing to manage my &lt;code>sessions&lt;/code> on multiplexer init while starting a new &lt;code>shell&lt;/code> or &lt;code>terminal&lt;/code> so I&amp;rsquo;ve ended creating a quick feature to manage it on startup.&lt;/p>
&lt;h3 id="dependencies">Dependencies
&lt;/h3>&lt;p>You need &lt;a href="https://github.com/lotabout/skim" target="_blank">sk&lt;/a> binary installed and in your &lt;code>$PATH&lt;/code> and of course &lt;a href="https://github.com/zellij-org/zellij/" target="_blank">zellij&lt;/a>.&lt;/p>
&lt;h3 id="demo">Demo
&lt;/h3>&lt;p>&lt;img src="https://lebaron.sh/images/sessions.gif"
loading="lazy"
alt="Zellij Sessions"
>&lt;/p>
&lt;h3 id="installation">Installation
&lt;/h3>&lt;p>Add this block at the end of your &lt;code>$SHELLrc&lt;/code> file &lt;i>(tested with BASH and ZSH)&lt;/i> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ZJ_SESSIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>zellij list-sessions&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NO_SESSIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZJ_SESSIONS&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> wc -l&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;{&lt;/span>&lt;span class="nv">$ZELLIJ&lt;/span>&lt;span class="s2">}&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZELLIJ_SESSION_NAME&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -ne &lt;span class="s2">&amp;#34;Active Zellij sessions :\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> i in &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZJ_SESSIONS&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="nb">echo&lt;/span> -ne &lt;span class="s2">&amp;#34;*&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">\n&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -ne &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> REPLY&lt;span class="se">\?&lt;/span>&lt;span class="s2">&amp;#34;New zellij session [y/n] ? &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">REPLY&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;y&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> SESS&lt;span class="se">\?&lt;/span>&lt;span class="s2">&amp;#34;Session name : &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> zellij --layout compact attach -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">SESS&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">NO_SESSIONS&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -ge &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> zellij --layout compact attach &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZJ_SESSIONS&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sk&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="contributing">Contributing
&lt;/h3>&lt;p>Feel free to fork and contribute.&lt;/p>
&lt;p>&lt;a href="https://github.com/lebarondecharlus/zellij-sessions" target="_blank">Sources are here.&lt;/a>&lt;/p></description></item><item><title>Shloader - A Modern Shell Loader</title><link>https://lebaron.sh/p/shloader-a-modern-shell-loader/</link><pubDate>Sat, 25 Jun 2022 18:03:17 +0200</pubDate><guid>https://lebaron.sh/p/shloader-a-modern-shell-loader/</guid><description>&lt;p>&lt;img src="https://lebaron.sh/images/shloader.png"
loading="lazy"
alt="Shloader"
>&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="#why" >Why&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#features" >Features&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#preview" >Preview&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#templating" >Templating&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#usage" >Usage&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#parsing-arguments" >Parsing Arguments&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#shell-configurations" >Shell Configurations&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trap-error-and-exit" >Trap Error and Exit&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#display-loader" >Display Loader&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#call-loader" >Call Loader&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#script-library-integration" >Scrip Library Integration&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#conclusion" >Conclusion&lt;/a>&lt;/li>
&lt;/ol>
&lt;h1 id="why">Why
&lt;/h1>&lt;p>I&amp;rsquo;ve been recently doing some old shell scripts to quickly automatize and distribute actions that were made manually, I&amp;rsquo;ll write a post on it later. For now I&amp;rsquo;d like to share with you how I&amp;rsquo;ve been coding a 100% shell loader library to use it in my scripts.&lt;/p>
&lt;p>I&amp;rsquo;ve been looking on the net for existing library, I&amp;rsquo;ve found some interesting Github projects but it doesn&amp;rsquo;t appear to be &amp;ldquo;library&amp;rdquo; ready. Furthermore, it was mostly old basic ASCII templates and IÂ wanted to give a try to modern loaders and spinners on shell.&lt;/p>
&lt;p>So I ended create &lt;a class="link" href="https://github.com/lebaronlebaron.shloader" target="_blank" rel="noopener"
>&lt;code>shloader&lt;/code>&lt;/a>.&lt;/p>
&lt;h1 id="features">Features
&lt;/h1>&lt;p>shloader has nice features such as :&lt;/p>
&lt;p>ðŸ˜ emoji support&lt;/p>
&lt;p>ðŸ’ª loader support&lt;/p>
&lt;p>ðŸ˜Ž dynamic message on load step&lt;/p>
&lt;p>â„¹ï¸ message on step ending&lt;/p>
&lt;p>ðŸŽ¨ multiple loading templates&lt;/p>
&lt;p>ðŸ‘Œ light and easy to use on existing scripts&lt;/p>
&lt;h1 id="preview">Preview
&lt;/h1>&lt;p>&lt;img src="https://lebaron.sh/images/shloader.gif"
loading="lazy"
alt="Shloader"
>&lt;/p>
&lt;h1 id="templating">Templating
&lt;/h1>&lt;p>First of all, we need to create templates, one for each loaders that will be displayed. I&amp;rsquo;ve decided to use shell &lt;code>array&lt;/code> so we can work on iteration later on customs functions.&lt;/p>
&lt;p>So I ended with something like :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># EMOJIS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_hour&lt;/span>&lt;span class="o">=(&lt;/span> 0.08 &lt;span class="s1">&amp;#39;ðŸ•›&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•‘&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•“&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•”&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ••&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•–&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•—&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ•š&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_face&lt;/span>&lt;span class="o">=(&lt;/span> 0.08 &lt;span class="s1">&amp;#39;ðŸ˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ˜€&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ™„&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ˜’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ˜¨&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ðŸ˜¡&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_earth&lt;/span>&lt;span class="o">=(&lt;/span> 0.1 ðŸŒ ðŸŒŽ ðŸŒ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_moon&lt;/span>&lt;span class="o">=(&lt;/span> 0.08 ðŸŒ‘ ðŸŒ’ ðŸŒ“ ðŸŒ” ðŸŒ• ðŸŒ– ðŸŒ— ðŸŒ˜ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_orange_pulse&lt;/span>&lt;span class="o">=(&lt;/span> 0.1 ðŸ”¸ ðŸ”¶ ðŸŸ  ðŸŸ  ðŸ”¶ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_blue_pulse&lt;/span>&lt;span class="o">=(&lt;/span> 0.1 ðŸ”¹ ðŸ”· ðŸ”µ ðŸ”µ ðŸ”· &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_blink&lt;/span>&lt;span class="o">=(&lt;/span> 0.06 ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜ ðŸ˜‘ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_camera&lt;/span>&lt;span class="o">=(&lt;/span> 0.05 ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“· ðŸ“¸ ðŸ“· ðŸ“¸ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_sick&lt;/span>&lt;span class="o">=(&lt;/span> 0.2 ðŸ¤¢ ðŸ¤¢ ðŸ¤® &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_monkey&lt;/span>&lt;span class="o">=(&lt;/span> 0.2 ðŸ™‰ ðŸ™ˆ ðŸ™Š ðŸ™ˆ &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">emoji_bomb&lt;/span>&lt;span class="o">=(&lt;/span> 0.2 &lt;span class="s1">&amp;#39;ðŸ’£ &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£ &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£ &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’£&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; ðŸ’¥&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ASCII&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ball&lt;/span>&lt;span class="o">=(&lt;/span> 0.2 &lt;span class="s1">&amp;#39;(â—)&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;(âš¬)&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">arrow&lt;/span>&lt;span class="o">=(&lt;/span> 0.06 &lt;span class="s1">&amp;#39;â†‘&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†—&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†“&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â†–&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">cym&lt;/span>&lt;span class="o">=(&lt;/span> 0.1 &lt;span class="s1">&amp;#39;âŠ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;âŠ“&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;âŠ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;âŠ”&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">x_plus&lt;/span>&lt;span class="o">=(&lt;/span> 0.08 &lt;span class="s1">&amp;#39;Ã—&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;+&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">line&lt;/span>&lt;span class="o">=(&lt;/span> 0.08 &lt;span class="s1">&amp;#39;â˜°&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â˜±&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â˜³&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â˜·&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â˜¶&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â˜´&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ball_wave&lt;/span>&lt;span class="o">=(&lt;/span> 0.1 &lt;span class="s1">&amp;#39;ð“ƒ‰ð“ƒ‰ð“ƒ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ð“ƒ‰ð“ƒ‰âˆ˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;ð“ƒ‰âˆ˜Â°&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;âˆ˜Â°âˆ˜&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Â°âˆ˜ð“ƒ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;âˆ˜ð“ƒ‰ð“ƒ‰&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">old&lt;/span>&lt;span class="o">=(&lt;/span> 0.07 &lt;span class="s1">&amp;#39;â€”&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;\\&amp;#34;&lt;/span> &lt;span class="s1">&amp;#39;|&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â£¾&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£½&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£»&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢¿&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡¿&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£Ÿ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£¯&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£·&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots2&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¸&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¼&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â §&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots3&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â š&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ž&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â –&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ²&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ³&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â “&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots4&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â †&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¸&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â °&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â °&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¸&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â †&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots5&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â š&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ²&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â –&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â “&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots6&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â š&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ²&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ²&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â š&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots7&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â ˆ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â “&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â –&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â –&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â “&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ˆ&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots8&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ™&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â š&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ²&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ´&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¤&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ¦&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â –&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ’&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â “&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‰&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ˆ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ˆ&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots9&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â¢¹&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢º&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢¼&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£¸&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â£‡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡§&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡—&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots10&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â¢„&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡ˆ&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡ &amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dots11&lt;/span>&lt;span class="o">=(&lt;/span> 0.04 &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ‚&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â „&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¡€&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â¢€&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â  &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â &amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;â ˆ&amp;#39;&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Array composition is divided in two parts, the first one is a &lt;code>time&lt;/code> interval in seconds and the second one is the loader frame transition.&lt;/p>
&lt;h1 id="usage">Usage
&lt;/h1>&lt;p>I wanted library to be used as commands can be, by passing argument through options.&lt;/p>
&lt;p>First, let&amp;rsquo;s work on default &lt;code>usage&lt;/code> function to display to user.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">usage&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cat &lt;span class="s">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Available options:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">-h, --help &amp;lt;OPTIONAL&amp;gt; Print this help and exit
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">-l, --loader &amp;lt;OPTIONAL&amp;gt; Chose loader to display
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">-m, --message &amp;lt;OPTIONAL&amp;gt; Text to display while loading
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">-e, --ending &amp;lt;OPTIONAL&amp;gt; Text to display when finishing
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>I wanted to define argument options as bellow :&lt;/p>
&lt;h4 id="display-help">Display help
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># e.g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Parameter&lt;/th>
&lt;th style="text-align: left">Type&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>-h --help&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>none&lt;/code>&lt;/td>
&lt;td style="text-align: left">Optional. Show help usage&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="chose-loader">Chose loader
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># e.g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -l arrow
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Parameter&lt;/th>
&lt;th style="text-align: left">Type&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>-l --loader&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>string&lt;/code>&lt;/td>
&lt;td style="text-align: left">Optional. Chose loader template&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="display-info-on-loading">Display info on loading
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># e.g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -m &lt;span class="s2">&amp;#34;my loading message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Parameter&lt;/th>
&lt;th style="text-align: left">Type&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>-m --message&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>string&lt;/code>&lt;/td>
&lt;td style="text-align: left">Optional. Show a text message while displaying loader&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="display-info-on-ending">Display info on ending
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># e.g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -e &lt;span class="s2">&amp;#34;\u2728 all done&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Parameter&lt;/th>
&lt;th style="text-align: left">Type&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>-e --end&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>string&lt;/code>&lt;/td>
&lt;td style="text-align: left">Optional. Show an end text message when loader ends&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="parsing-arguments">Parsing Arguments
&lt;/h1>&lt;p>In order to work on user input, it is necessary to read option content so we can modular library execution.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">shloader&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">loader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">message&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ending&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> :&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h &lt;span class="p">|&lt;/span> --help&lt;span class="o">)&lt;/span> usage&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -l &lt;span class="p">|&lt;/span> --loader&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">loader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -m &lt;span class="p">|&lt;/span> --message&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">message&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -e &lt;span class="p">|&lt;/span> --ending&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ending&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -?*&lt;span class="o">)&lt;/span> die &lt;span class="s2">&amp;#34;Unknown option: &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span> &lt;span class="nb">break&lt;/span> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>â€¦&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You might notice I&amp;rsquo;ve placed it directly in the main &lt;code>function&lt;/code> so it will be the first element to be run.&lt;/p>
&lt;p>If user don&amp;rsquo;t specify loader, we should display one as default, let&amp;rsquo;s say &lt;code>dots&lt;/code> one.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># shloader func&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>â€¦&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">loader&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">loader&lt;/span>&lt;span class="o">=&lt;/span>dots&lt;span class="o">[&lt;/span>@&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">loader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$loader&lt;/span>&lt;span class="o">[&lt;/span>@&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>â€¦&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>One last thing here, I use a little custom &lt;code>die&lt;/code> function to exit properly if option is unknown.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">die&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">local&lt;/span> &lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="p">-1&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$code&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="shell-configurations">Shell Configurations
&lt;/h1>&lt;p>We will make some quick configuration on the top header script under &lt;code>shebang&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># https://github.com/lebaronlebaron.shloader&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># me@lebaron.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -Eeuo pipefail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> end_shloader SIGINT SIGTERM ERR EXIT RETURN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tput civis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>First, &lt;code>set -Eeuo pipefail&lt;/code> so we can exit execution if one of the commands in the pipe fails.&lt;/p>
&lt;p>Then, &lt;code>trap end_shloader SIGINT SIGTERM ERR EXIT RETURN&lt;/code> so we can call a custom function to clean our execution on exiting, stopping, errorsâ€¦&lt;/p>
&lt;p>Finaly, &lt;code>tput civis&lt;/code> is used to hide cursor.&lt;/p>
&lt;h1 id="trap-error-and-exit">Trap Error and Exit
&lt;/h1>&lt;p>Trap will call a custom function, but how does it work ?&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">end_shloader&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">kill&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">shloader_pid&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tput cnorm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ending&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;\r&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ending&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Right here I ensure first to kill loader&amp;rsquo;s &lt;code>PID&lt;/code> and restore cursor thanks to &lt;code>tput cnorm&lt;/code>.&lt;/p>
&lt;h1 id="display-loader">Display Loader
&lt;/h1>&lt;p>Now we can interact with shell output to generate loading animations.&lt;/p>
&lt;p>Let&amp;rsquo;s create a new function &lt;code>play_shloader()&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">play_shloader&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> frame in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">loader&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;\r%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">frame&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">message&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">speed&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Here we assume we have &lt;code>loader&lt;/code> array we can display during time duration defined in &lt;code>speed&lt;/code> variable (we will see it after).&lt;/p>
&lt;h1 id="call-loader">Call Loader
&lt;/h1>&lt;p>What about now ? We have all bricks to make great loaders, let&amp;rsquo;s put them in work together !&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># shloader function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>â€¦&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">loader&lt;/span>&lt;span class="o">=(&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="p">!loader&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">speed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">loader&lt;/span>&lt;span class="p">[0]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> &lt;span class="s2">&amp;#34;loader[0]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tput civis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> play_shloader &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">shloader_pid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="p">!&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>â€¦&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>What is done here ?&lt;/p>
&lt;p>We first print &lt;code>loader&lt;/code> array content we save in &lt;code>loader&lt;/code> variable. We know first element in array is time duration, so we save it in &lt;code>speed&lt;/code> variable.&lt;/p>
&lt;p>Now we have split array, we can remove time duration as it is now under &lt;code>speed&lt;/code> variable.
We then hide cursor, call our &lt;code>play_shloader&lt;/code> function and save &lt;code>PID&lt;/code>.&lt;/p>
&lt;p>You can find the &lt;a class="link" href="https://github.com/lebaronlebaron.shloader/blob/main/lib/shloader.sh" target="_blank" rel="noopener"
>Full Library Code&lt;/a>&lt;/p>
&lt;h1 id="script-library-integration">Script Library Integration
&lt;/h1>&lt;p>Nothing hard here !&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ./lib/shloader.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -l emoji_hour -m &lt;span class="s2">&amp;#34;Testing&amp;#34;&lt;/span> -e &lt;span class="s2">&amp;#34;âœ¨ All good !&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">2&lt;/span> &lt;span class="c1"># remove it in your code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># â€¦ your logic goes here&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end_shloader
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>With more details :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">!/bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if you want to try just add this block code in your code &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ./lib/shloader.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># you can chose (see more in lib/loader.sh):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ball, arrow, cym, x_plus, line, ball_wave, npm and old.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># you can specify message to display during loading&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># and message to display after your code finished&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># eg with npm style&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># notice end message -e use unicode emoji to display&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># this is for better terminal support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># \u2728 == âœ¨ but you can use emoji if your settings support it !&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shloader -l emoji_face -m &lt;span class="s2">&amp;#34;Testing&amp;#34;&lt;/span> -e &lt;span class="s2">&amp;#34;\u2728 All good !&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">2&lt;/span> &lt;span class="c1"># remove it in your code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># â€¦ your logic goes here&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if you want to hide some output from loader&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># don&amp;#39;t forget to redirect your STD*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># eg :&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># STDOUT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># my_cmd 1&amp;gt; /dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># STDERR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># my_cmd 2&amp;gt; /dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># BOTH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># my_cmd &amp;amp;&amp;gt; /dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># stop loader&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end_shloader
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="conclusion">Conclusion
&lt;/h1>&lt;p>As all things uselessâ€¦ it may become mandatory ðŸ˜‚.&lt;/p></description></item></channel></rss>